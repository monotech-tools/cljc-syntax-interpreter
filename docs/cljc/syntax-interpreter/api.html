<!DOCTYPE html>
<html><html><head><style type="text/css">body{margin:12px 0 0 560px;padding:60px 48px}button{background-color:transparent;border:none;cursor:pointer;padding:0;user-select:none}button:hover{opacity:.5}div{box-sizing:border-box}pre{display:block;margin:0;letter-spacing:.8px}.scroll-x{overflow-x:auto}.scroll-y{flex-grow:1;overflow-y:auto}a,a:active,a:hover,a:visited{display:block;text-decoration:none}a.inline-link{display:inline-block}a.inline-link:hover{text-decoration:underline}.button{padding:3px 12px;white-space:inherit;letter-spacing:.5px}.button:hover{background-color:#f0f0f0}.button--active{background-color:#f3f3f3}.button--active:hover{background-color:#f0f0f0}.text--xs{font-size:10px;line-height:18px}.text--s{font-size:12px;line-height:18px}.text--m{font-size:13px;line-height:18px}.text--l{font-size:14px;line-height:18px}.text--xl{font-size:18px;line-height:24px}.text--semi-bold{font-weight:500}.text--bold{font-weight:600}.text--uppercase{text-transform:uppercase}.text--boxed{background-color:#fafafa;padding:12px 8px}.text--hidden{display:none}.text--wrap{-white-space:normal;white-space:pre-wrap}.image--boxed{background-color:#fafafa;padding:12px 8px}.color--black{color:#000000}.color--hard-grey{color:#404040}.color--soft-grey{color:#808080}.color--hard-blue{color:#0088cc}.color--soft-blue{color:#55aabb}.color--hard-purple{color:#8800cc}.color--soft-purple{color:#aa55bb}.color--hard-red{color:#cc00aa}[data-collapsed="true"] .snippet--text{display:none}[data-collapsible="true"] .snippet--header::after{align-items:center;content:'▼';display:flex;font-size:8px;justify-content:center;height:18px;width:18px}[data-collapsible="true"][data-collapsed="false"] .snippet--header::after{content:'▲'}#top-bar{background-color:#ffffff;border-bottom:1px solid #e0e0e0;display:flex;gap:6px;height:60px;left:0;padding-left:18px;position:fixed;top:0;width:100%}#top-bar--library-uri{padding:21px 18px;position:absolute;right:0;top:0}#top-bar--library-uri:hover{background-color:#f0f0f0}#top-bar--library-name{padding:18px 0;text-transform:uppercase}#top-bar--library-version{margin-top:12px}#bottom-bar{background-color:white;border-top:1px solid #e0e0e0;bottom:0;display:flex;justify-content:right;left:0;position:fixed;width:100%}#bottom-bar--credits-link{padding:12px 18px}#bottom-bar--credits-link:hover{background-color:#f0f0f0}#primary-list{background-color:#fff;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;height:calc(100vh - 60px);left:0;padding:12px 0 54px 0;position:fixed;top:60px;width:280px}#secondary-list{background-color:#fff;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;height:calc(100vh - 60px);left:280px;padding:12px 0 54px 0;position:fixed;top:60px;width:280px}#primary-list,#secondary-list{z-index:9999}#primary-list .text--xs,#secondary-list .text--xs{padding-left:12px}.primary-list--container,.secondary-list--container{margin-bottom:12px}.section{padding:72px 0}.section--header{border-bottom:1px solid #e0e0e0;padding-bottom:8px;margin-bottom:12px}.snippets{display:flex;flex-direction:column;gap:24px}.snippet--header{display:flex;gap:4px}.snippet--preview-image{border:1px solid #dedede;display:block;max-height:480px;max-width:640px;min-height:48px;min-width:64px}</style><script type="text/javascript">function toggleCollapsible(collapsibleId){collapsible=document.getElementById(collapsibleId);if(collapsible.dataset.collapsed==='true'){collapsible.dataset.collapsed='false';}else{collapsible.dataset.collapsed='true';}}</script></head><body><div id="primary-list"><div class="scroll-y"><div class="primary-list--container"><pre class="color--soft-grey text--xs text--uppercase">Isomorphic namespaces</pre><a href="https://mt-devtools.github.io/cljc-syntax-interpreter/cljc/syntax-interpreter/api.html"><pre class="button color--hard-blue text--m button--active">syntax-interpreter.api</pre></a></div></div></div><div id="secondary-list"><div class="scroll-y"><div class="secondary-list--container"><pre class="color--soft-grey text--xs text--uppercase">Tutorials</pre><a href="#how-to-use-the-interpreter"><pre class="button color--hard-purple text--m">How to use the interpreter?</pre></a><a href="#how-to-use-metafunctions"><pre class="button color--hard-purple text--m">How to use metafunctions?</pre></a><a href="#provided-metafunctions"><pre class="button color--hard-purple text--m">Provided metafunctions</pre></a></div><div class="secondary-list--container"><pre class="color--soft-grey text--xs text--uppercase">Declarations</pre><a href="#clj-patterns"><pre class="button color--hard-blue text--m">CLJ-PATTERNS</pre></a><a href="#css-patterns"><pre class="button color--hard-blue text--m">CSS-PATTERNS</pre></a><a href="#interpreter"><pre class="button color--hard-blue text--m">interpreter</pre></a><a href="#with-options"><pre class="button color--hard-blue text--m">with-options</pre></a></div></div></div><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">Isomorphic namespace</pre><pre class="color--black text--xl text--wrap text--bold">syntax-interpreter.api</pre></div><div class="sections"><div class="section" id="how-to-use-the-interpreter"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">tutorial</pre><pre class="color--hard-purple text--xl text--wrap text--bold">How to use the interpreter?</pre></div><div class="snippets"><div class="snippet" data-collapsed="false" data-collapsible="false" id="qeb35e1cb-8f57-47fb-a830-35abe0495726"><div class="snippet--header"><pre class="text--xs text--uppercase color--hard-grey text--hidden">plain</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">The <a class="inline-link color--hard-blue" href="#interpreter">interpreter</a> function applies  the given 'f' function at each cursor position of the given 'n' string.<br><br>It provides a state of the actual position and a set of metafunctions for the applied function.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc9654e99-12a1-4b63-9077-347450459def"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter ; Processed string:<br>             "abcdef (ghijkl ())"<br><br>             ; Processing function:<br>             (fn [result state metafunctions]<br>                 (cond ((:tag-starts? metafunctions) :paren) (update result :paren-starts-at conj (:cursor state))<br>                       ((:tag-opens?  metafunctions) :paren) (update result :paren-opens-at  conj (:cursor state))<br>                       ((:tag-closes? metafunctions) :paren) (update result :paren-closes-at conj (:cursor state))<br>                       ((:tag-ends?   metafunctions) :paren) (update result :paren-ends-at   conj (:cursor state))<br>                       :return result))<br><br>             ; Initial output:<br>             {:paren-starts-at [] :paren-opens-at [] :paren-closes-at [] :paren-ends-at []}<br><br>             ; Processed tags:<br>             [[:paren #"\(" #"\)"]])<br>=&gt;<br>{:paren-starts-at [ 7 16]<br> :paren-opens-at  [ 8 17]<br> :paren-closes-at [17 18]<br> :paren-ends-at   [18 19]}</pre></div></div></div></div><div class="section" id="how-to-use-metafunctions"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">tutorial</pre><pre class="color--hard-purple text--xl text--wrap text--bold">How to use metafunctions?</pre></div><div class="snippets"><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf06709a8-531d-49ac-9491-2ef67b90a3cb"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ {:keys [tag-opened?] :as metafunctions}]<br>                 ; A)<br>                 (tag-opened? :my-tag)<br>                 ; B)<br>                 ((:tag-opened? metafunctions) :my-tag))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div></div></div><div class="section" id="provided-metafunctions"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">tutorial</pre><pre class="color--hard-purple text--xl text--wrap text--bold">Provided metafunctions</pre></div><div class="snippets"><div class="snippet" data-collapsed="false" data-collapsible="false" id="q2759ca7f-d6cb-4c08-a139-b4144767c54c"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Ancestor / parent tag metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ((:ancestor-tags   metafunctions))<br>                 ((:depth           metafunctions))<br>                 ((:no-tags-opened? metafunctions))<br>                 ((:parent-tag      metafunctions))<br>                 ((:tag-ancestor?   metafunctions) :my-tag)<br>                 ((:tag-depth       metafunctions) :my-tag)<br>                 ((:tag-parent?     metafunctions) :my-tag))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q65faeef9-ad49-46ae-9428-700fa1cb60c7"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Interpreter metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ((:reading-any-closing-match? metafunctions))<br>                 ((:reading-any-opening-match? metafunctions))<br>                 ((:reading-any-match?         metafunctions)))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qefe41146-7a1f-4d92-a62b-9b8fe845bdc5"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Operator metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ; The "My metadata" string will be available in the actual state from the next cursor position.<br>                 ((:use-metadata metafunctions) "My metadata" "My result")<br>                 ; Immediatelly stops the interpreter at the actual cursor position.<br>                 ((:stop metafunctions) "My result")<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7b9e7e3f-647e-48c9-a783-70b812b57d7d"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Tag boundary metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ((:closing-tag    metafunctions))<br>                 ((:ending-tag     metafunctions))<br>                 ((:opening-tag    metafunctions))<br>                 ((:starting-tag   metafunctions))<br>                 ((:tag-closed-at  metafunctions) :my-tag)<br>                 ((:tag-closed?    metafunctions) :my-tag)<br>                 ((:tag-closes?    metafunctions) :my-tag)<br>                 ((:tag-ends?      metafunctions) :my-tag)<br>                 ((:tag-opened-at  metafunctions) :my-tag)<br>                 ((:tag-opened?    metafunctions) :my-tag)<br>                 ((:tag-opens?     metafunctions) :my-tag)<br>                 ((:tag-started-at metafunctions) :my-tag)<br>                 ((:tag-started?   metafunctions) :my-tag)<br>                 ((:tag-starts?    metafunctions) :my-tag))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa5e6cbf1-4d59-4a3f-a886-1f877d2af56d"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Tag body / content metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ((:tag-body    metafunctions) :my-tag)<br>                 ((:tag-content metafunctions) :my-tag))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf93a8e6a-ed1a-4cb6-a22f-4dffb44ba177"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Tag history metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ((:tag-left-count metafunctions) :my-tag)<br>                 ((:tag-met-count  metafunctions) :my-tag))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qd8f30e6c-85b6-4373-bca6-7213bc79822e"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">Tag details metafunctions:</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "..."<br>             (fn [_ _ metafunctions]<br>                 ((:tag-details         metafunctions) :my-tag)<br>                 ((:tag-opening-pattern metafunctions) :my-tag)<br>                 ((:tag-closing-pattern metafunctions) :my-tag)<br>                 ((:tag-options         metafunctions) :my-tag))<br>             nil<br>             [[:my-tag #"..."]])</pre></div></div></div></div></div><div class="sections"><div class="section" id="clj-patterns"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">def</pre><pre class="color--hard-blue text--xl text--bold">CLJ-PATTERNS</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="qf5854bf1-936f-45a6-a3c4-20044f1402b3"><button class="snippet--header" onClick="toggleCollapsible(&apos;qf5854bf1-936f-45a6-a3c4-20044f1402b3&apos;)"><pre class="text--xs text--uppercase color--hard-grey ">source-code</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">(def CLJ-PATTERNS
     {:symbol            [:symbol            #"[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&][a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']*(?=[\s\[\]\(\)\{\}\"\@\~])"     {:pattern-limits {:lookahead 1}}]
      :meta-symbol       [:meta-symbol       #"\^[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&][a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']*(?=[\s\[\]\(\)\{\}\"\@\~])"   {:pattern-limits {:lookahead 1}}]
      :derefed-symbol    [:derefed-symbol    #"\@[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&][a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']*(?=[\s\[\]\(\)\{\}\"\@\~])"   {:pattern-limits {:lookahead 1}}]
      :unresolved-symbol [:unresolved-symbol #"\'[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&][a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']*(?=[\s\[\]\(\)\{\}\"\@\~])"   {:pattern-limits {:lookahead 1}}]
      :var               [:var               #"\#\'[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&][a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']*(?=[\s\[\]\(\)\{\}\"\@\~])" {:pattern-limits {:lookahead 1}}]
      :keyword           [:keyword           #"\:[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']+(?=[\s\[\]\(\)\{\}\"\@\~])"                                   {:pattern-limits {:lookahead 1}}]
      :meta-keyword      [:meta-keyword      #"\^\:[a-zA-Z\d\+\-\_\&lt;\&gt;\=\*\!\?\%\&\/\#\:\.\']+(?=[\s\[\]\(\)\{\}\"\@\~])"                                 {:pattern-limits {:lookahead 1}}]
      :boolean           [:boolean           #"true|false(?=[\s\[\]\(\)\{\}\"\@\~])"                     {:pattern-limits {:match 5 :lookahead 1}}]
      :conditional-form  [:conditional-form  #"\#\?\(\:clj[s]*" #"\)"                                    {:pattern-limits {:opening/match 8 :closing/match 1}}]
      :list              [:list              #"\("                 #"\)"                                 {:pattern-limits {:opening/match 1 :closing/match 1}}]
      :map               [:map               #"\{"                 #"\}"                                 {:pattern-limits {:opening/match 1 :closing/match 1}}]
      :meta-map          [:meta-map          #"\^\{"               #"\}"                                 {:pattern-limits {:opening/match 2 :closing/match 1}}]
      :vector            [:vector            #"\["                 #"\]"                                 {:pattern-limits {:opening/match 1 :closing/match 1}}]
      :comment           [:comment           #";"                  #"\n"           {:accepted-children [] :pattern-limits {:opening/match 1 :closing/match 1}}]
      :regex-pattern     [:regex-pattern     #"\#\""               #"(?&lt;=[^\\])\"" {:accepted-children [] :pattern-limits {:opening/match 2 :closing/match 1 :closing/lookbehind 1}}]
      :string            [:string            #"\""                 #"(?&lt;=[^\\])\"" {:accepted-children [] :pattern-limits {:opening/match 1 :closing/match 1 :closing/lookbehind 1}}]
      :meta-string       [:meta-string       #"\^\""               #"(?&lt;=[^\\])\"" {:accepted-children [] :pattern-limits {:opening/match 2 :closing/match 1 :closing/lookbehind 1}}]})</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q82db0123-f4e0-4424-8c00-cc9240bce0fe"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">description</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">Default tag patterns for processing Clojure source codes.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q73307eda-3868-456d-80f1-130e35ad6279"><div class="snippet--header"><pre class="text--xs text--uppercase color--hard-blue ">note</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">Lookbehind, lookahead and match length limits help decrease the processing time,<br>and help create more accurate matches for tag patterns with lookaround assertions.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q35c94ad5-319b-466c-90ff-b65121e15e23"><div class="snippet--header"><pre class="text--xs text--uppercase color--hard-blue ">note</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">Strings and regex patterns can include escaped quote characters.<br>Therefore, their closing pattern must exclude escape characters that precede the closing quote character.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q35826be5-55f5-4322-9aaa-64e83175d0f2"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "(ns my-namespace ...) (defn my-function [_] ...) ..."<br>             (fn [_ _ _] ...)<br>             nil<br>             [(:boolean           CLJ-PATTERNS)<br>              (:comment           CLJ-PATTERNS)<br>              (:conditional-form  CLJ-PATTERNS)<br>              (:derefed-symbol    CLJ-PATTERNS)<br>              (:keyword           CLJ-PATTERNS)<br>              (:list              CLJ-PATTERNS)<br>              (:map               CLJ-PATTERNS)<br>              (:meta-map          CLJ-PATTERNS)<br>              (:meta-string       CLJ-PATTERNS)<br>              (:meta-symbol       CLJ-PATTERNS)<br>              (:regex-pattern     CLJ-PATTERNS)<br>              (:string            CLJ-PATTERNS)<br>              (:symbol            CLJ-PATTERNS)<br>              (:unresolved-symbol CLJ-PATTERNS)<br>              (:var               CLJ-PATTERNS)<br>              (:vector            CLJ-PATTERNS)])</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qe88f075a-0915-498f-96e8-de37849afc7f"><button class="snippet--header" onClick="toggleCollapsible(&apos;qe88f075a-0915-498f-96e8-de37849afc7f&apos;)"><pre class="text--xs text--uppercase color--soft-grey ">constant</pre><pre class="text--xs text--uppercase color--soft-grey">vectors in map</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">{:tag-name (vector)<br>  [(keyword) tag-name<br>   (regex pattern) pattern / opening-pattern<br>   (regex pattern)(opt) closing-pattern<br>   (map)(opt) options]}</pre></div></div></div></div><div class="section" id="css-patterns"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">def</pre><pre class="color--hard-blue text--xl text--bold">CSS-PATTERNS</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q175407ad-ba4b-4f8f-a6e5-41544c2a693b"><button class="snippet--header" onClick="toggleCollapsible(&apos;q175407ad-ba4b-4f8f-a6e5-41544c2a693b&apos;)"><pre class="text--xs text--uppercase color--hard-grey ">source-code</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">(def CSS-PATTERNS
     {:class [:class #"(?&lt;=[\s\}\]\)\*\~\&gt;\+a-zA-Z\d\_\-])\.[a-zA-Z\d\_][a-zA-Z\d\_\-]*(?&lt;=[\s\{\[\*\~\&gt;\:\.\#])" {:pattern-limits {:lookbehind 1 :lookahead 1}}]
      :id    [:id    #"(?&lt;=[\s\}\]\)\*\~\&gt;\+a-zA-Z\d\_\-])\#[a-zA-Z\d\_][a-zA-Z\d\_\-]*(?&lt;=[\s\{\[\*\~\&gt;\:\.\#])" {:pattern-limits {:lookbehind 1 :lookahead 1}}]
      :tag   [:tag   #"(?&lt;=[\s\}\]\)\*\~\&gt;\+a-zA-Z\d\_\-])[a-zA-Z]+(?&lt;=[\s\{\[\*\~\&gt;\:\.\#])"                     {:pattern-limits {:lookbehind 1 :lookahead 1}}]})</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qf8f72256-e25a-4720-bebb-71aa0a1cb917"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">description</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">Default tag patterns for processing CSS contents.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qaf4947cb-cdc3-47cb-890b-2aad82c9bcd7"><div class="snippet--header"><pre class="text--xs text--uppercase color--hard-blue ">note</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">Lookbehind, lookahead and match length limits help decrease the processing time,<br>and help create more accurate matches for tag patterns with lookaround assertions.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qc53aa84c-e3aa-4f91-89b1-ca28920d3a9b"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "#my-id {background-color: red} ..."<br>             (fn [_ _ _] ...)<br>             nil<br>             [(:class CSS-PATTERNS)<br>              (:id    CSS-PATTERNS)<br>              (:tag   CSS-PATTERNS)])</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q9f6025e5-4b19-4d8f-a6d3-e84f9734b1a3"><button class="snippet--header" onClick="toggleCollapsible(&apos;q9f6025e5-4b19-4d8f-a6d3-e84f9734b1a3&apos;)"><pre class="text--xs text--uppercase color--soft-grey ">constant</pre><pre class="text--xs text--uppercase color--soft-grey">vectors in map</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">{:tag-name (vector)<br>  [(keyword) tag-name<br>   (regex pattern) pattern / opening-pattern<br>   (regex pattern)(opt) closing-pattern<br>   (map)(opt) options]}</pre></div></div></div></div><div class="section" id="with-options"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">defn</pre><pre class="color--hard-blue text--xl text--bold">with-options</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q37079235-c702-48fa-b714-89696273529d"><button class="snippet--header" onClick="toggleCollapsible(&apos;q37079235-c702-48fa-b714-89696273529d&apos;)"><pre class="text--xs text--uppercase color--hard-grey ">source-code</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">(defn with-options
  [tag options]
  (if (and (vector? tag) (map? options))
      (if (-&gt; tag last map?)
          (-&gt; tag (vector/update-last-item map/deep-merge options))
          (-&gt; tag (vector/conj-item                       options)))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q01040f6b-22c0-4aac-a104-62985a2d8bf0"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">description</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">Applies the given options on the given tag.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q7ae86124-5b60-48fe-b6d2-52f0932e9c33"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(with-options [:my-tag #"..."]<br>              {:pattern-limits {:match 5}})<br>=&gt;<br>[:my-tag #"..." {:pattern-limits {:match 5}}]</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q8f55b6ae-7bd0-48f6-9552-0c621875f7ca"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(with-options [:my-tag #"..." #"..."]<br>              {:pattern-limits {:match 5}})<br>=&gt;<br>[:my-tag #"..." #"..." {:pattern-limits {:match 5}}]</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q4483bb12-aa4c-469e-9f39-bc0473bff9d9"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(with-options [:my-tag #"..." #"..." {:pattern-limits {:lookahead 3}}]<br>              {:pattern-limits {:match 5}})<br>=&gt;<br>[:my-tag #"..." #"..." {:pattern-limits {:match 5 :lookahead 3}}]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q7a28a286-c09f-4ffb-b265-4f3567c0139e"><button class="snippet--header" onClick="toggleCollapsible(&apos;q7a28a286-c09f-4ffb-b265-4f3567c0139e&apos;)"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">vector</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">tag</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">[(keyword) tag-name<br> (regex pattern) pattern / opening-pattern<br> (regex pattern)(opt) closing-pattern<br> (map)(opt) options]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q13081e96-d653-4656-94b3-f81a5bf1a2e1"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">map</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">options</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q9d81ca5e-07fd-4bf6-ad13-a20392ef4395"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">return</pre><pre class="text--xs text--uppercase color--soft-grey">vector</pre></div></div></div></div><div class="section" id="interpreter"><div class="section--header"><pre class="color--soft-grey text--xs text--uppercase">defn</pre><pre class="color--hard-blue text--xl text--bold">interpreter</pre></div><div class="snippets"><div class="snippet" data-collapsed="true" data-collapsible="true" id="q9e791030-91ae-4155-b80e-23acc61b1961"><button class="snippet--header" onClick="toggleCollapsible(&apos;q9e791030-91ae-4155-b80e-23acc61b1961&apos;)"><pre class="text--xs text--uppercase color--hard-grey ">source-code</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">(defn interpreter
  ([n f initial]
   (interpreter n f initial {} {}))

  ([n f initial tags]
   (interpreter n f initial tags {}))

  ([n f initial tags options]
   (letfn [
           (f0 [state]
               {:ancestor-tags              (interpreter.metafunctions/ancestor-tags-f             n tags options state)
                :closing-tag                (interpreter.metafunctions/closing-tag-f               n tags options state)
                :depth                      (interpreter.metafunctions/depth-f                     n tags options state)
                :ending-tag                 (interpreter.metafunctions/ending-tag-f                n tags options state)
                :left-sibling-count         (interpreter.metafunctions/left-sibling-count-f        n tags options state)
                :no-tags-opened?            (interpreter.metafunctions/no-tags-opened-f            n tags options state)
                :opening-tag                (interpreter.metafunctions/opening-tag-f               n tags options state)
                :parent-tag                 (interpreter.metafunctions/parent-tag-f                n tags options state)
                :reading-any-closing-match? (interpreter.metafunctions/reading-any-closing-match-f n tags options state)
                :reading-any-opening-match? (interpreter.metafunctions/reading-any-opening-match-f n tags options state)
                :reading-any-match?         (interpreter.metafunctions/reading-any-match-f         n tags options state)
                :starting-tag               (interpreter.metafunctions/starting-tag-f              n tags options state)
                :stop                       (interpreter.metafunctions/stop-f                      n tags options state)
                :tag-ancestor?              (interpreter.metafunctions/tag-ancestor-f              n tags options state)
                :tag-body                   (interpreter.metafunctions/tag-body-f                  n tags options state)
                :tag-closed-at              (interpreter.metafunctions/tag-closed-at-f             n tags options state)
                :tag-closed?                (interpreter.metafunctions/tag-closed-f                n tags options state)
                :tag-closes?                (interpreter.metafunctions/tag-closes-f                n tags options state)
                :tag-closing-pattern        (interpreter.metafunctions/tag-closing-pattern-f       n tags options state)
                :tag-content                (interpreter.metafunctions/tag-content-f               n tags options state)
                :tag-depth                  (interpreter.metafunctions/tag-depth-f                 n tags options state)
                :tag-details                (interpreter.metafunctions/tag-details-f               n tags options state)
                :tag-ends?                  (interpreter.metafunctions/tag-ends-f                  n tags options state)
                :tag-left-count             (interpreter.metafunctions/tag-left-count-f            n tags options state)
                :tag-met-count              (interpreter.metafunctions/tag-met-count-f             n tags options state)
                :tag-opened-at              (interpreter.metafunctions/tag-opened-at-f             n tags options state)
                :tag-opened?                (interpreter.metafunctions/tag-opened-f                n tags options state)
                :tag-opening-pattern        (interpreter.metafunctions/tag-opening-pattern-f       n tags options state)
                :tag-opens?                 (interpreter.metafunctions/tag-opens-f                 n tags options state)
                :tag-options                (interpreter.metafunctions/tag-options-f               n tags options state)
                :tag-parent?                (interpreter.metafunctions/tag-parent-f                n tags options state)
                :tag-started-at             (interpreter.metafunctions/tag-started-at-f            n tags options state)
                :tag-started?               (interpreter.metafunctions/tag-started-f               n tags options state)
                :tag-starts?                (interpreter.metafunctions/tag-starts-f                n tags options state)
                :use-metadata               (interpreter.metafunctions/use-metadata-f              n tags options state)})

           (f1 [state]
               (if (interpreter.utils/offset-reached? n tags options state)
                   (fn [result state metafunctions] (try (f result state metafunctions)
                                                         (catch Exception e (println e))))
                   (fn [result _ _] (-&gt; result))))]

          (let [initial-state {:actual-tags [] :left-tags {} :cursor 0 :result initial}]
               (loop [{:keys [result] :as state} initial-state]
                     (let [actual-state           (interpreter.utils/update-previous-state n tags options state)
                           provided-state         (interpreter.utils/filter-provided-state n tags options actual-state)
                           provided-metafunctions (-&gt; actual-state f0)
                           applied-function       (-&gt; actual-state f1)
                           updated-result         (-&gt; result (applied-function provided-state provided-metafunctions))
                           updated-state          (interpreter.utils/update-actual-state n tags options actual-state updated-result)]
                          (cond (interpreter.utils/iteration-stopped? n tags options updated-state) (-&gt; updated-state :result)
                                (interpreter.utils/endpoint-reached?  n tags options updated-state) (-&gt; updated-state :result)
                                (interpreter.utils/iteration-ended?   n tags options updated-state) (-&gt; updated-state :result)
                                :next-iteration (let [prepared-state (interpreter.utils/prepare-next-state n tags options updated-state)]
                                                     (recur prepared-state)))))))))</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q0456f66a-0a42-4fe5-a98d-9ac3b77b7783"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">description</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey text--wrap">- Applies the given 'f' function at each cursor position of the given 'n' string.<br>- Provides a state of the actual position and a set of metafunctions for the applied function.<br>- The provided state contains the 'actual-tags' vector that describes the opened tags at the actual position<br>  and contains the 'left-tags' map that contains tags that are already ended before the actual position and<br>  removed from the 'actual-tags' vector.</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q972d0536-ff4e-4bb6-8604-efe446c0eb34"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "My string" (fn [result state metafunctions]) nil)</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="qa5351740-eed6-4f5e-8529-4805ce2239fc"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(interpreter "My string" println nil)</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q98f33a81-dd7d-4447-8c85-818f5f1b10d5"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(let [my-text     "abc(def(ghi))"<br>      my-function (fn [result state _] (if (= 8 (:cursor state)) state result)<br>      my-initial  nil<br>      my-tags     [[:paren #"\(" #"\)"]]<br>    (interpreter my-text my-function my-initial my-tags)<br>=&gt;<br>{:actual-tags [{:name :paren :started-at 3 :opened-at 4}<br>               {:name :paren :started-at 7 :opened-at 8}]<br> :cursor 8}</pre></div></div><div class="snippet" data-collapsed="false" data-collapsible="false" id="q4f034336-d5ea-418b-b19b-4fa518bbfd53"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">usage</pre></div><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">(let [my-text     "&lt;div&gt;Hello World!&lt;/div&gt;"<br>      my-function (fn [result state _] (if (= 8 (:cursor state)) state result)<br>      my-initial  nil<br>      my-tags     [[:div #"\&lt;div\&gt;" #"\&lt;\/div\&gt;"]]<br>    (interpreter my-text my-function my-initial my-tags)<br>=&gt;<br>{:actual-tags [{:name :div :started-at 0 :opened-at 5}]<br> :cursor 8}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q53a758a0-266e-43c3-90ae-dd996f1db914"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">string</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">n</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="qa8214b61-2236-4e39-b3b0-078559000498"><button class="snippet--header" onClick="toggleCollapsible(&apos;qa8214b61-2236-4e39-b3b0-078559000498&apos;)"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">function</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">f</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">Applied at each cursor position.<br>Takes the output of the previous iteration (or the given 'initial' value) as first parameter.<br>Takes the state of the actual cursor position as second parameter.<br>Takes a map with metafunctions as third parameter.</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="q4e11bf3c-db53-4fac-9ec4-dd67a4232f67"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">*</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">initial</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q91b1f565-0124-4bfd-b647-e0cf94a0a5cd"><button class="snippet--header" onClick="toggleCollapsible(&apos;q91b1f565-0124-4bfd-b647-e0cf94a0a5cd&apos;)"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">vectors in vector</pre><pre class="text--xs text--uppercase color--soft-grey">opt</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">tags</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">[[(keyword) tag-name<br>  (regex pattern) pattern / opening-pattern<br>  (regex pattern)(opt) closing-pattern<br>  (map)(opt) options<br>  {:accepted-ancestors (keywords in vector or empty vector)(opt)<br>    Processes the tag only if at least one of the accepted ancestor tags is opened.<br>    Leave this vector empty for tags that are processed only if they have no ancestor tags.<br>   :accepted-children (keywords in vector or empty vector)(opt)<br>    Processes child tags only if listed in this vector.<br>    Leave this vector empty for void tags that cannot have children.<br>   :accepted-descendants (keywords in vector or empty vector)(opt)<br>    Processes descendant tags only if listed in this vector.<br>    Leave this vector empty for void tags that cannot have descendants.<br>   :accepted-parents (keywords in vector or empty vector)(opt)<br>    Processes the tag only if at least one of the accepted parent tags is opened.<br>    Leave this vector empty for tags that are processed only if they have no parent tags.<br>   :pattern-limits (map)(opt)<br>    Limited pattern lookaround and match lengths help decrease the processing time<br>    and help create more accurate matches for tag patterns with lookaround assertions.<br>    {:lookahead (integer)(opt)<br>      Default: 0<br>     :lookbehind (integer)(opt)<br>      Default: 0<br>     :match (integer)(opt)<br>      Default: 64<br>     :closing/lookahead (integer)(opt)<br>      Default: 0<br>     :closing/lookbehind (integer)(opt)<br>      Default: 0<br>     :closing/match (integer)(opt)<br>      Default: 64<br>     :opening/lookahead (integer)(opt)<br>      Default: 0<br>     :opening/lookbehind (integer)(opt)<br>      Default: 0<br>     :opening/match (integer)(opt)<br>      Default: 64}]]</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="true" id="q601ea7cd-d50d-4475-a6ee-854cc13a45ae"><button class="snippet--header" onClick="toggleCollapsible(&apos;q601ea7cd-d50d-4475-a6ee-854cc13a45ae&apos;)"><pre class="text--xs text--uppercase color--soft-grey ">param</pre><pre class="text--xs text--uppercase color--soft-grey">map</pre><pre class="text--xs text--uppercase color--soft-grey">opt</pre><pre class="text--xs text--uppercase text--bold color--hard-grey">options</pre></button><div class="snippet--text"><pre class="text--s text--boxed color--hard-grey scroll-x">{:endpoint (integer)(opt)<br>  Stops the interpreter at the given 'endpoint' position.<br> :offset (integer)(opt)<br>  Starts applying the given 'f' function at the given 'offset' position.<br>  In order to make accurate tag map, the interpreter starts processing at the 0th position even if the 'offset' value is higher than 0.}</pre></div></div><div class="snippet" data-collapsed="true" data-collapsible="false" id="qd2df3a63-74c7-4c17-aa30-6096af89bdea"><div class="snippet--header"><pre class="text--xs text--uppercase color--soft-grey ">return</pre><pre class="text--xs text--uppercase color--soft-grey">*</pre></div></div></div></div></div><div id="top-bar"><pre class="text--xl text--bold" id="top-bar--library-name">cljc-syntax-interpreter</pre><pre class="color--soft-grey text--s" id="top-bar--library-version">0.0.7.1</pre><a class="text--s" href="https://github.com/mt-devtools/cljc-syntax-interpreter" id="top-bar--library-uri"><pre class="color--hard-blue">github.com/mt-devtools/cljc-syntax-interpreter</pre></a></div><div id="bottom-bar"><a class="color--soft-purple text--s" href="https://github.com/mt-devtools/clj-source-code-documentation" id="bottom-bar--credits-link"><pre>github.com/mt-devtools/clj-source-code-documentation</pre></a></div></body></html></html>
